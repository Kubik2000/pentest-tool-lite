import chai from 'chai';
const expect = chai.expect;
import outcome from '../../src/outcome';

describe('test outcome', function() {
  beforeEach(function() {
    outcome.removeMessages();
  });

  afterEach(function() {
    outcome.removeMessages();
  });

  it('should store and return all messages', () => {
    outcome.info('default', 'https://example.com', 'Info!');
    outcome.warning('default', 'https://example.com', 'Warning!');
    outcome.error('default', 'https://example.com', 'Error!');

    const messages = outcome.getMessages();
    expect(messages).to.deep.equal({
      default: {
        'https://example.com': [
          {
            type: 'info',
            text: 'Info!',
          },
          {
            type: 'warning',
            text: 'Warning!',
          },
          {
            type: 'error',
            text: 'Error!',
          },
        ],
      },
    });
  });
});
