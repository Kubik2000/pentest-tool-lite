import chai from 'chai';
const expect = chai.expect;
import getResources from '../../src/functions/getResources.js';

describe('functions', function() {
  describe('test getResources', function() {
    it('should return all scripts and stylesheets', () => {
      const html = [
        {
          type: 'tag',
          name: 'html',
          children: [
            {
              type: 'tag',
              name: 'head',
              children: [
                {
                  type: 'tag',
                  name: 'title',
                },
                {
                  type: 'tag',
                  name: 'link',
                  attribs: {
                    href: 'styles.css',
                    rel: 'stylesheet',
                  },
                },
                {
                  type: 'script',
                  name: 'script',
                  attribs: {
                    src: 'script.js',
                  },
                },
              ],
            },
            {
              type: 'tag',
              name: 'body',
              children: [
                {
                  type: 'tag',
                  name: 'h1',
                },
                {
                  type: 'script',
                  name: 'script',
                  attribs: {
                    src: 'script2.js',
                  },
                },
              ],
            },
          ],
        },
      ];
      const resources = getResources({ url: 'https://juffalow.com', html: html });

      expect(resources).to.have.members([
        'https://juffalow.com/styles.css',
        'https://juffalow.com/script.js',
        'https://juffalow.com/script2.js',
      ]);
    });
  });
});
