import chai from 'chai';
const expect = chai.expect;
import parseHtml from '../../src/default/parseHtml.js';

describe('test parseHtml', function() {
  it('should return html as array of objects', (done) => {
    const result = {
      body: '<html><head><link rel="stylesheet" href="main.css" /></head><body><p>Text</p><a href="#">link</a><script src="script.js"></script></body></html>',
    };

    const promise = parseHtml(result);

    promise.then(function(html) {
      expect(html.length).to.equal(1);
      expect(html[0].children.length).to.equal(2);
      expect(html[0].children[0].children.length).to.equal(1);
      expect(html[0].children[1].children.length).to.equal(3);

      expect(html[0].children[1].children[0].type).to.equal('tag');
      expect(html[0].children[1].children[0].name).to.equal('p');

      expect(html[0].children[1].children[1].type).to.equal('tag');
      expect(html[0].children[1].children[1].name).to.equal('a');

      expect(html[0].children[1].children[2].type).to.equal('script');
      expect(html[0].children[1].children[2].name).to.equal('script');
      done();
    });
  });
});
