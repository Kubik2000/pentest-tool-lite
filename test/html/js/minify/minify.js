import chai from 'chai';
const expect = chai.expect;
import checkMinifiedJs from '../../../../src/html/js/minify/minify.js';

describe('html', function() {
  describe('js', function() {
    describe('test minify function', function() {
      it('should throw error, JavaScript is not minified and uglified!', () => {
        const result = {
          body: 'function something(text) { console.log("not minified javascript file"); }',
        };

        expect(checkMinifiedJs.bind(null, result)).to.throw();
        expect(checkMinifiedJs.bind(null, result)).to.throw('JavaScript is not minified and uglified!');
      });

      it('should throw error, JavaScript is not uglified!', () => {
        const result = {
          body: 'function something(text){console.log("not minified javascript file")}',
        };

        expect(checkMinifiedJs.bind(null, result)).to.throw();
        expect(checkMinifiedJs.bind(null, result)).to.throw('JavaScript is not uglified!');
      });


      it('should return empty array', () => {
        const result = {
          body: 'function s(t){}',
        };

        expect(checkMinifiedJs.bind(null, result)).to.not.throw();
      });
    });
  });
});
