import chai from 'chai';
const expect = chai.expect;
import checkMinifiedJs from '../../../../src/html/js/minify/minify.js';

describe('html', function() {
  describe('test minify function', function() {
    it('should return array with two errors ( not minified, not uglified )', () => {
      const result = {
        body: 'function something(text) { console.log("not minified javascript file"); }',
      };

      const error = checkMinifiedJs(result);
      expect(error.length).to.equal(2);
    });

    it('should return array with one error ( minified but not uglified )', () => {
      const result = {
        body: 'function something(text){console.log("not minified javascript file")}',
      };

      const error = checkMinifiedJs(result);
      expect(error.length).to.equal(1);
    });


    it('should return empty array', () => {
      const result = {
        body: 'function s(t){}',
      };

      const error = checkMinifiedJs(result);
      expect(error.length).to.equal(0);
    });
  });
});
