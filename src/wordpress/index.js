import fetch from '../default/fetch.js';
import checkIfWordPress from './checkIfWordPress.js';
import checkAdminPage from './checkAdminPage.js';

export default function(url) {
  return new function() {
    return new Promise(function(resolve, reject) {
      const chain = Promise.resolve(url);

      chain.then(fetch)
        .then(checkIfWordPress)
        .then(() => {
          return Promise.resolve(url)
            .then(checkAdminPage);
        })
        .then(() => { resolve(); })
        .catch(() => { console.log('Not a wordpress site!'); resolve(); });
    });
  };
};
