import jsdom from 'jsdom';
const { JSDOM } = jsdom;

export default function(result) {
  const dom = new JSDOM(result.body);
  const resources = [];
  const baseUrl = result.url.substring(0, result.url.indexOf('/', result.url.indexOf('://') + 3));

  Object.keys(dom.window.document.images).forEach((key, value) => {
    dom.window.document.images[key].src.startsWith(baseUrl) && resources.push(dom.window.document.images[key].src);
  });

  Object.keys(dom.window.document.scripts).forEach((key, value) => {
    dom.window.document.scripts[key].src.startsWith(baseUrl) && resources.push(dom.window.document.scripts[key].src);
  });

  return resources;
}
