import program from 'commander';
import winston from 'winston';
import run from './run.js';

process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';

program
  .version('1.2.0')
  .usage('[options] <URL ...>')
  .description('Description')
  .option('--only-selected', 'run only selected checks')
  .option('--default', 'run default checks')
  .option('--resources', 'run resources checks')
  .option('--references', 'run references checks')
  .option('--wordpress', 'run wordpress checks')
  .option('-d, --debug', 'debug mode')
  .option('-v, --verbose', 'be more verbose/talkative during the operation')
  .parse(process.argv);

if( program.verbose ) {
  winston.level = 'verbose';
}

if( program.debug ) {
  winston.level = 'debug';
}

run(program.args[0], program);
