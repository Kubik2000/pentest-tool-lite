import security from './security';
import wordpress from './wordpress';

import report from './report';
import plainFormat from './report/format/plain.js';

export default function(url, options) {
  if( !url.endsWith('/') ) {
    url += '/';
  }

  return Promise.resolve(url)
    .then(security)
    .then(wordpress)
    .then(() => {
      return report.getReports();
    })
    .then(plainFormat);
}
