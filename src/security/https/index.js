import { fetchWithoutRedirect } from '../../functions/fetch.js';
import httpsToHttp from './httpsToHttp.js';
import https from './https.js';
import error from './error.js';

export default function(url) {
  return Promise.resolve(url)
    .then(httpsToHttp)
    .then(fetchWithoutRedirect)
    .then(https)
    .then((err) => {
      err.length > 0 && error(url, err);
    })
    .then(() => { return url; });
};
