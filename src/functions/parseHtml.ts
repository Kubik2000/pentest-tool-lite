import DomHandler from 'domhandler';
import { Parser } from 'htmlparser2';

export default function(result: any): Promise<any> {
  return new Promise((resolve, reject) => {
    const handler = new DomHandler((error, dom) => {
      resolve({
        html: dom,
        url: result.url,
      });
    });
    const parser = new Parser(handler, {lowerCaseAttributeNames: true});
    parser.write(result.body);
    parser.end();
  });
}
