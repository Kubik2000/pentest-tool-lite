import UglifyJS from 'uglify-js';

export default function(result) {
  const error = [];

  const r = UglifyJS.minify(result.body, { mangle: false, output: { comments: true } });
  const r2 = UglifyJS.minify(result.body);

  if (r.code.length !== result.body.length) {
    error.push('minified');
  }
  if (r2.code.length !== result.body.length || r2.code.length !== r.code.length) {
    error.push('uglified');
  }
  if (error.length === 1) {
    throw new Error('JavaScript is not ' + error[0] + '!');
  } else if (error.length > 1) {
    throw new Error('JavaScript is not ' + error.join(' and ') + '!');
  }
}
