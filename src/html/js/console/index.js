import winston from 'winston';
import * as fetch from '../../../functions/fetch.js';
import checkConsoleLog from './console.js';
import error from './error.js';

export default function(url) {
  winston.verbose('Checking if', url.substring(url.lastIndexOf('/') + 1), 'has any console logging...');

  return Promise.resolve(url)
    .then(fetch.fetch)
    .then(checkConsoleLog)
    .then((err) => {
      err.length > 0 && error(url, err);
    })
    .then(() => { return url; });
};
